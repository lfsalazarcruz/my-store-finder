<!DOCTYPE html> <!--[if gt IE 8]><!-->
<html class="no-js">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="index.css" />
    <script src="https://api.mapbox.com/mapbox.js/v3.2.0/mapbox.js"></script>
    <link
      href="https://api.mapbox.com/mapbox.js/v3.2.0/mapbox.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="sidebar">
      <div class="heading">
        <h1>Our locations</h1>
      </div>
      <div id="listings" class="listings"></div>
    </div>
    <div id="map" class="map pad2">Map</div>

    <script src="" async defer></script>
    <script>
      L.mapbox.accessToken =
        "pk.eyJ1IjoibGZzYWxhemFyY3J1eiIsImEiOiJjanQ4NTZibjAwNTZ1NDl1aWk0Zjg4dncyIn0.bN8E3W_BFnjyQKzOCxtkDg";

      var geojson = [
        {
          type: "FeatureCollection",
          features: [
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.034084142948, 38.909671288923]
              },
              properties: {
                phoneFormatted: "(202) 234-7336",
                phone: "2022347336",
                address: "1471 P St NW",
                city: "Washington DC",
                country: "United States",
                crossStreet: "at 15th St NW",
                postalCode: "20005",
                state: "D.C."
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.049766, 38.900772]
              },
              properties: {
                phoneFormatted: "(202) 507-8357",
                phone: "2025078357",
                address: "2221 I St NW",
                city: "Washington DC",
                country: "United States",
                crossStreet: "at 22nd St NW",
                postalCode: "20037",
                state: "D.C."
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.043929, 38.910525]
              },
              properties: {
                phoneFormatted: "(202) 387-9338",
                phone: "2023879338",
                address: "1512 Connecticut Ave NW",
                city: "Washington DC",
                country: "United States",
                crossStreet: "at Dupont Circle",
                postalCode: "20036",
                state: "D.C."
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.0672, 38.90516896]
              },
              properties: {
                phoneFormatted: "(202) 337-9338",
                phone: "2023379338",
                address: "3333 M St NW",
                city: "Washington DC",
                country: "United States",
                crossStreet: "at 34th St NW",
                postalCode: "20007",
                state: "D.C."
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.002583742142, 38.887041080933]
              },
              properties: {
                phoneFormatted: "(202) 547-9338",
                phone: "2025479338",
                address: "221 Pennsylvania Ave SE",
                city: "Washington DC",
                country: "United States",
                crossStreet: "btwn 2nd & 3rd Sts. SE",
                postalCode: "20003",
                state: "D.C."
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-76.933492720127, 38.99225245786]
              },
              properties: {
                address: "8204 Baltimore Ave",
                city: "College Park",
                country: "United States",
                postalCode: "20740",
                state: "MD"
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.097083330154, 38.980979]
              },
              properties: {
                phoneFormatted: "(301) 654-7336",
                phone: "3016547336",
                address: "4831 Bethesda Ave",
                cc: "US",
                city: "Bethesda",
                country: "United States",
                postalCode: "20814",
                state: "MD"
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.359425054188, 38.958058116661]
              },
              properties: {
                phoneFormatted: "(571) 203-0082",
                phone: "5712030082",
                address: "11935 Democracy Dr",
                city: "Reston",
                country: "United States",
                crossStreet: "btw Explorer & Library",
                postalCode: "20190",
                state: "VA"
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.10853099823, 38.880100922392]
              },
              properties: {
                phoneFormatted: "(703) 522-2016",
                phone: "7035222016",
                address: "4075 Wilson Blvd",
                city: "Arlington",
                country: "United States",
                crossStreet: "at N Randolph St.",
                postalCode: "22203",
                state: "VA"
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-75.28784, 40.008008]
              },
              properties: {
                phoneFormatted: "(610) 642-9400",
                phone: "6106429400",
                address: "68 Coulter Ave",
                city: "Ardmore",
                country: "United States",
                postalCode: "19003",
                state: "PA"
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-75.20121216774, 39.954030175164]
              },
              properties: {
                phoneFormatted: "(215) 386-1365",
                phone: "2153861365",
                address: "3925 Walnut St",
                city: "Philadelphia",
                country: "United States",
                postalCode: "19104",
                state: "PA"
              }
            },
            {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: [-77.043959498405, 38.903883387232]
              },
              properties: {
                phoneFormatted: "(202) 331-3355",
                phone: "2023313355",
                address: "1901 L St. NW",
                city: "Washington DC",
                country: "United States",
                crossStreet: "at 19th St",
                postalCode: "20036",
                state: "D.C."
              }
            }
          ]
        }
      ];

      var map = L.mapbox
        .map("map")
        .setView([38.909671288923, -77.034084142948], 13)
        .addLayer(
          L.mapbox.styleLayer(
            "mapbox://styles/lfsalazarcruz/cjt9k9jn10bxk1fph17it6and"
          )
        );

      var listings = document.getElementById("listings");
      var locations = L.mapbox.featureLayer().addTo(map);

      locations.setGeoJSON(geojson);

      function setActive(el) {
        var siblings = listings.getElementsByTagName("div");
        for (var i = 0; i < siblings.length; i++) {
          siblings[i].className = siblings[i].className
            .replace(/active/, "")
            .replace(/\s\s*$/, "");
        }

        el.className += " active";
      }

      locations.eachLayer(function(locale) {
        // Shorten locale.feature.properties to just `prop` so we're not
        // writing this long form over and over again.
        var prop = locale.feature.properties;

        // Each marker on the map.
        var popup = "<h3>Sweetgreen</h3><div>" + prop.address;

        var listing = listings.appendChild(document.createElement("div"));
        listing.className = "item";

        var link = listing.appendChild(document.createElement("a"));
        link.href = "#";
        link.className = "title";

        link.innerHTML = prop.address;
        if (prop.crossStreet) {
          link.innerHTML +=
            '<br /><small class="quiet">' + prop.crossStreet + "</small>";
          popup +=
            '<br /><small class="quiet">' + prop.crossStreet + "</small>";
        }

        var details = listing.appendChild(document.createElement("div"));
        details.innerHTML = prop.city;
        if (prop.phone) {
          details.innerHTML += " &middot; " + prop.phoneFormatted;
        }

        link.onclick = function() {
          setActive(listing);

          // When a menu item is clicked, animate the map to center
          // its associated locale and open its popup.
          map.setView(locale.getLatLng(), 16);
          locale.openPopup();
          return false;
        };

        // Marker interaction
        locale.on("click", function(e) {
          // 1. center the map on the selected marker.
          map.panTo(locale.getLatLng());

          // 2. Set active the markers associated listing.
          setActive(listing);
        });

        popup += "</div>";
        locale.bindPopup(popup);

        locale.setIcon(
          L.icon({
            iconUrl: "marker.png",
            iconSize: [56, 56],
            iconAnchor: [28, 28],
            popupAnchor: [0, -34]
          })
        );
      });
    </script>
  </body>
</html>
